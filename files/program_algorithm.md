flowchart TD
    A[Старт]
    B[Пользователь добавляет товар через форму]
    C[Определение подходящего стеллажа]
    C1{Есть свободный стеллаж нужного размера?}
    D1[Назначить подходящий стеллаж]
    D2[Искать стеллаж большего размера]
    E[Добавить товар в БД]
    F[Рассчитать занятый и свободный объём]
    G[Показать информацию пользователю]
    H[Товар отредактирован?]
    I[Пересчитать склад]
    J[Нажата кнопка балансировки?]
    K[Поиск товаров на неправильных стеллажах]
    L[Переместить товары на подходящие стеллажи]
    M[Обновить информацию]
    Z[Конец]

    A --> B --> C --> C1
    C1 -- Да --> D1
    C1 -- Нет --> D2
    D1 --> E
    D2 --> E
    E --> F --> G --> H
    H -- Да --> I --> G
    H -- Нет --> J
    J -- Да --> K --> L --> M --> G
    J -- Нет --> Z
